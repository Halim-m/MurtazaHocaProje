<!DOCTYPE html>
<html>
<head>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.2.7-rc.0/web3.min.js"></script>

    <title>Page Title</title>
</head>
<body>
    <button onclick="matemaskConnect()"><p>bişeyler</p> </button>
    <p id="matemaskTxt"></p>

	<button onclick="connectContract()">CONNECT TO CONTRACT</button> <br>
	<p id="contractArea"></p>
	<button onclick="readContract()">GET DATA FROM CONTRACT</button> <br>
	<p id="dataArea"></p>
    <button onclick="changeWord()">GET DATA FROM CONTRACT</button> <br>
    <input type="text" id="1">
    <script>
    //document.getElementById("matemaskTxt").innerHTML= "metamaskBağlıDeğil";

        let msg;
        const matemaskConnect = async () => {
            if(window.ethereum!= undefined){
              // alert("matemaskAlgılandı");
                //how to connect ethereum account with requestAccount method ?
            const accounts = await ethereum.request({method:"eth_requestAccounts"});
            msg =accounts[0];
            document.getElementById("matemaskTxt").innerHTML= msg;
            alert("wallet  connected:\n"+msg);

            }
            else{
                alert("install matemask");
            }

        }


          //2- connect to smart contract
          const connectContract = async () => {
            const ABI =[
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_word",
				"type": "string"
			}
		],
		"name": "changeFlower",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "getFlower",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	}
];
            const Address = "0xB4D89e64244531467a4FfD87Dd7C117A891324eF";
            window.web3 = await new Web3(window.ethereum);
            window.contract = await new window.web3.eth.Contract( ABI, Address); 
            document.getElementById("contractArea").innerHTML = "connected to smart contract";
        }

        //3-read data from smart contract
        // how to read data from smart contract ?
        const readContract = async () => {
            try{ const data = await window.contract.methods.getFlower().call();
            document.getElementById("dataArea").innerHTML = data;}
           catch  {document.getElementById("dataArea").innerHTML = "error! \n try to connect the smart contract \n or check the wallet connection ";
        }}
const changeWord=async () =>{
    var inputValue  =document.getElementById("1").value;
    await window.contract.methods.changeFlower(inputValue).send({ from: msg });
    readContract();
}
    </script>

</body>
</html>






